<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pta na</title>
    <style>
        * {
            margin: 0;
        }

        #canvas {
            background-color: black;
        }
    </style>
</head>

<body>
    <input type="text" id="inp">
    <canvas id="canvas"></canvas>
</body>
<script type="module">
    import Vector from './vector.js'
    import Ball from './ball.js'
    import Graph from './graph.js'
    const c = document.getElementById('canvas');
    let W = c.width = window.innerWidth
    let H = c.height = window.innerHeight
    // console.log(window.innerWidth);
    const ctx = c.getContext('2d');
    let Balls = []
    for (let i = 0; i < W; i++) {
        let b = Ball.randomBall(ctx, 'white')
        b.r=2
        b.acc = new Vector()
        // b.pos.color = 'yellow'
        Balls.push(b)
        Ball.resist = 1.1
        b.draw(ctx)
    }
    // c.addEventListener('mousemove', e => {
    //     Ball.target = new Vector()
    // })
    let Y = document.getElementById('inp')
    // let g = new Graph('white')
    Y.addEventListener('input', () => {
        let n=10
        let p = Graph.getPoints(ctx,Y.value,n)
        for (let i = 0; i < Ball.count; i++) {
            let j = Math.floor(i/n)
            Balls[i].goto = new Vector(p[j][0],p[j][1])
        }
    })
    function animate() {
        ctx.clearRect(0, 0, W, H);
        Balls.forEach(b => {
            // b.drawDetail(ctx)
            b.draw(ctx)
        });
        setTimeout(() => {
            window.requestAnimationFrame(animate);
        }, 20);
    }
    window.requestAnimationFrame(animate);
</script>

</html>